(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["wxcomponents/hch-position/hch-position"],{"3a5e":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t,n,e,o,a,i,s){try{var c=t[i](s),r=c.value}catch(u){return void e(u)}c.done?n(r):Promise.resolve(r).then(o,a)}function s(t){return function(){var n=this,e=arguments;return new Promise(function(o,a){var s=t.apply(n,e);function c(t){i(s,o,a,c,r,"next",t)}function r(t){i(s,o,a,c,r,"throw",t)}c(void 0)})}}var c={props:{storeData:{type:Array,default:[{id:1,name:"门店1号",address:"厦门市思明区汇景商业广场XXX1号",tel:"12345678900"},{id:2,name:"门店2号",address:"厦门市思明区汇景商业广场XXX2号",tel:"12345678900"}]},markers:{type:Array,default:[{id:1,latitude:22.656830122431952,longitude:114.01990361901852,iconPath:"../../static/hch-position/门店.png",callout:{content:"门店1号店",borderRadius:10,padding:10,display:"ALWAYS"}},{id:2,latitude:22.663465,longitude:114.023343,iconPath:"../../static/hch-position/门店.png",callout:{content:"门店2号店",borderRadius:10,padding:10,display:"ALWAYS"}}]}},data:function(){return{store:{},storeFlag:!1,storeAdFlag:!0,distanceL:0,latitude:22.663465,longitude:114.023343,controls:[],userinfo:[]}},methods:{getapiinfo:function(){var n=s(o.default.mark(function n(e){var a;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.$apis.chencklogin({code:e});case 2:a=n.sent,this,0==a.code?t.reLaunch({url:"../../pages/auth/auth"}):(this.userinfo=a.data,t.setStorageSync("openid",a.data.openid),console.log(this.userinfo,"已登录"));case 5:case"end":return n.stop()}},n,this)}));function e(t){return n.apply(this,arguments)}return e}(),openidtogetinfo:function(){var t=s(o.default.mark(function t(n){var e;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apis.openidtogetinfo({openid:n});case 2:e=t.sent,this.userinfo=e.data;case 4:case"end":return t.stop()}},t,this)}));function n(n){return t.apply(this,arguments)}return n}(),gotoupersoncenter:function(){t.navigateTo({url:"../../pages/personcenter/personcenter"})},savaphone:function(){var t=s(o.default.mark(function t(n,e){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$apis.savephone({openid:n,phone:e}),this.openidtogetinfo(n);case 2:case"end":return t.stop()}},t,this)}));function n(n,e){return t.apply(this,arguments)}return n}(),getphone:function(){var n=s(o.default.mark(function n(e,a,i){var s,c;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.$apis.getphone({code:e,iv:a,encryptedData:i});case 2:s=n.sent,console.log(s.data.phoneNumber,"手机授权返回"),c=t.getStorageSync("openid"),this.savaphone(c,s.data.phoneNumber);case 6:case"end":return n.stop()}},n,this)}));function e(t,e,o){return n.apply(this,arguments)}return e}(),ismmsign:function(){var n=s(o.default.mark(function n(){var e,a;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return e=t.getStorageSync("openid"),n.next=3,this.$apis.ismmsign({openid:e});case 3:a=n.sent,Console.log(a,"是否签约"),a.code?t.scanCode({success:function(t){console.log(t,"扫码成功返回")},fail:function(t){console.log(t,"扫码失败返回")}}):t.showModal({title:"温馨提示",content:"请完成完成微信免密支付签约",success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}});case 6:case"end":return n.stop()}},n,this)}));function e(){return n.apply(this,arguments)}return e}(),scanCode:function(n){console.log(this.userinfo.phone,"手机号");var e=this;null==this.userinfo.phone||""==this.userinfo.phone?(t.login({success:function(t){e.getphone(t.code,n.detail.iv,n.detail.encryptedData)}}),console.log(n,"返回信息")):e.ismmsign()},storeDesEvn:function(){t.getLocation({type:"gcj02",success:function(n){var e=n.latitude,o=n.longitude;t.openLocation({latitude:e,longitude:o,success:function(){console.log("success")}})}})},barkpostion:function(){var t=wx.createMapContext("myMap",this);t.moveToLocation()},callouttap:function(t){this.storeFlag=!0,this.storeAdFlag=!1;for(var n=0;n<this.storeData.length;n++){var e=this.storeData[n];if(e.id==t.markerId){this.store=e;break}}},bindtap:function(t){this.storeFlag=!1,console.log(this.storeFla,"点击了")},hideAd:function(){this.storeAdFlag=!1},updated:function(){var t=this;wx.getLocation({type:"gcj02",success:function(n){t.latitude=n.latitude,t.longitude=n.longitude,t.nearDistance(t.markers,t.latitude,t.longitude)},fail:function(t){console.log(t)}})},regionchange:function(t){var n=this,e=wx.createMapContext("myMap",this);e.getScale({success:function(t){}}),e.getCenterLocation({success:function(t){n.centerLatitude=t.latitude,n.centerLongitude=t.longitude,n.nearDistance(n.markers,n.centerLatitude,n.centerLongitude)},fail:function(t){console.log(t)}})},distance:function(t,n,e,o){var a=t*Math.PI/180,i=e*Math.PI/180,s=a-i,c=n*Math.PI/180-o*Math.PI/180,r=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(a)*Math.cos(i)*Math.pow(Math.sin(c/2),2)));return r*=6378.137,r=Math.round(1e4*r)/1e4,r},nearDistance:function(t,n,e){for(var o=[],a=0,i=t.length;a<i;a++){var s=t[a],c=this.distance(s.latitude,s.longitude,n,e);o.push(c)}this.distanceL=Math.min.apply(null,o)}},onShow:function(){console.log("hch-postion on show")},onReady:function(){console.log("hch-postion on onReady");var n=this;t.login({success:function(t){console.log(t.code,"code"),n.getapiinfo(t.code)}})}};n.default=c}).call(this,e("543d")["default"])},"3c64":function(t,n,e){"use strict";e.r(n);var o=e("3a5e"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=a.a},"3fa3":function(t,n,e){},6204:function(t,n,e){"use strict";e.r(n);var o=e("b4a6"),a=e("3c64");for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);e("97e9");var s=e("2877"),c=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);n["default"]=c.exports},"97e9":function(t,n,e){"use strict";var o=e("3fa3"),a=e.n(o);a.a},b4a6:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},a=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return a})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'wxcomponents/hch-position/hch-position-create-component',
    {
        'wxcomponents/hch-position/hch-position-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6204"))
        })
    },
    [['wxcomponents/hch-position/hch-position-create-component']]
]);                
